# Исправление ошибок

## #1 - исправлено

после редактирования данных в личном кабинете они сохраняются в БД но на странице остаются прежние данные.

Вылечено: перенос блока кода, который ловит исправление данных в ЛК (POST запрос) до блока, формирующего контекст для шаблона.

## #2 - исправлено

**Описание бага:** При нажатии на иконку юзера выходит форма авторизации даже если ты уже авторизован. 

**Что сделано:** Вывод этой иконки сделал только если юзер не авторизован (правки в header.html).

## #3 - исправлено

**Описание бага:** После авторизации показывается имя юзера из основной модели User. Даже если ты поменял телефон в личном кабинете. 

**Что сделано:** Сделал, что показывается имя из CakeUser. Добавил related_name в поле user. Еще один плюс - после регистрации можно назначить человечье имя своему аккаунту. Правка header.html

## #4 - исправлено

**Описание бага**: Авторизация не работала на других страницах кроме главной.
**Что сделано** (в том числе некоторые вещи - по пути):
- добавлено проедставление user_login куда адресуется форма регистрации где бы она ни была открыта.
- форме регистрации по пути испрвлен метод на POST
- переопределение метода get() убрано из IndexView за ненадобностью

## #4 - исправлено 

**Описание бага:** В каталоге если торту не назначена категория отражалось "None". 
**Что сделано**: применен `default_if_none` в шаблоне. См. [тут](https://docs.djangoproject.com/en/4.2/ref/templates/builtins/#default-if-none)